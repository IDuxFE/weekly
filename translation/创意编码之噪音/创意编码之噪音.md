# ã€è¯‘ã€‘åˆ›æ„ç¼–ç ä¹‹å™ªéŸ³

> åŸæ–‡ï¼š[https://varun.ca/noise/](https://varun.ca/noise/)
> ä½œè€…ï¼š[Ahmad Shadeed](https://ishadeed.com/hire-me/)
> è¯‘è€…ï¼š[NSGUF](https://juejin.cn/user/782508011303272)
 
![1.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e111af665402499ab06e1335579b5196~tplv-k3u1fbpfcp-watermark.image?)  

å™ªéŸ³æ˜¯ä¸€ç§åˆ›æ„ç¼–ç ä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚æˆ‘ä»¬ä½¿ç”¨å®ƒæ¥ç”Ÿæˆå„ç§å„æ ·çš„ä»¿è‡ªç„¶å½¢æ€çš„æ•ˆæœï¼Œå¦‚äº‘ï¼Œé£æ™¯ä»¥åŠè½®å»“ç­‰ï¼›æˆ–è€…ä»¥æ›´é€¼çœŸçš„è¡Œä¸ºç§»åŠ¨å’Œæ‰­æ›²å¯¹è±¡ï¼›

è¡¨é¢ä¸Šçœ‹ï¼Œå™ªéŸ³ä¼¼ä¹å¾ˆå®¹æ˜“ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒæœ‰éå¸¸å¤šå±‚æ¬¡ï¼Œè¿™ç¯‡æ–‡ç« æ·±å…¥ç ”ç©¶äº†ä»€ä¹ˆæ˜¯å™ªéŸ³ï¼Œå®ƒçš„å˜ç§æœ‰å“ªäº›ï¼Œå¦‚ä½•åœ¨ç½‘ç»œå’Œåº”ç”¨ç¨‹åºä¸Šä½¿ç”¨ï¼›ä¹Ÿä¼šå±•ç¤ºå¾ˆå¤šçš„ä¾‹å­ï¼Œéå¸¸å¤šçš„ä¾‹å­ï¼

# å™ªéŸ³æ˜¯ä»€ä¹ˆï¼Ÿ
å‡è®¾ä½ æƒ³åœ¨å±å¹•ä¸Šç§»åŠ¨ä¸€ä¸ªç‰©ä½“ã€‚åŠ¨ç”»å¸ˆä¼šä½¿ç”¨å…³é”®å¸§å’Œè¡¥å¸§æ¥æè¿°è¿™ä¸ªç¡®åˆ‡çš„è¿åŠ¨ã€‚ç”Ÿæˆç±»ä¼¼è¿™ä¸ªåŠ¨ç”»å¸ˆçš„è‰ºæœ¯å®¶ä¾èµ–äºç®—æ³•ï¼›

é‚£ä¹ˆï¼Œ`math.random()`å¯ä»¥å®ç°å—ï¼Ÿ

ä¸è¡Œï¼Œéšæœºå°±å¤ªä¸è‡ªç„¶äº†ï¼Œçœ‹ä¸‹é¢è¿™ä¸ªç²‰çº¢è‰²çš„çƒï¼Œåˆ°å¤„å¼¹è·³ï¼Œè¿™å°±å¾ˆæ¶å¿ƒäº†ğŸ¥´ï¼›

æˆ‘ä»¬éœ€è¦æ›´å¹³æ»‘ï¼Œæ›´è‡ªç„¶çš„éšæœºæ€§ï¼Œè¿™ä¸ªï¼ˆé»„è‰²çš„çƒï¼‰å°±æ˜¯å™ªéŸ³å‡½æ•°ç”Ÿæˆçš„ï¼Œç¾è§‚å¤šäº†ï¼›

![2.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e51d0659c5da4f348bf5180b58db3b8c~tplv-k3u1fbpfcp-watermark.image?)  

è‡ªç„¶éšæœºçš„æƒ³æ³•åœ¨åˆ›æ„ç¼–ç ä¸­å‡ºç°äº†ä¸€éåˆä¸€éã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬ç»å¸¸ä½¿ç”¨å™ªéŸ³å‡½æ•°ç”Ÿæˆçº¹ç†ï¼Œç§»åŠ¨æˆ–æ‰­æ›²ç‰©ä½“ï¼›

## åœ¨ç½‘ç»œä¸Šç”Ÿæˆå™ªéŸ³
ä¸¤ç§ç±»å‹å™ªéŸ³â€”â€”Perlinå’ŒSimplex

åœ¨1980å¹´åˆæœŸï¼ŒKen Perlinåœ¨åšTronæ—¶å¼€å‘äº†Perlinå™ªéŸ³å¹¶å› è¿™ä¸ªç‰¹æ•ˆè·å¾—å¥¥æ–¯å¡å¥–ã€‚ç„¶åä»–åœ¨æ­¤è¿™ç§ç‰¹æ•ˆä¸Šæ”¹è¿›å¼€å‘äº†Simplexï¼Œè¿™ç§æ–°ç®—æ³•è¿è¡Œé€Ÿåº¦æ›´å¿«ã€‚æˆ‘å°†ä¼šä¸“æ³¨äºåè€…ï¼Œå¹¶åœ¨æˆ‘çš„ä¾‹å­ä¸­ä½¿[simplex-noise](https://www.npmjs.com/package/simplex-noise)åº“ï¼›

å™ªéŸ³å‡½æ•°æ¥å—ä¸¤ä¸ªè¾“å…¥ï¼ˆç”¨äºç”Ÿæˆè¾“å‡ºï¼‰å¹¶ä¸”è¿”å›ä¸€ä¸ª-1åˆ°1çš„å€¼ã€‚è¿™ä¸ªè¾“å‡ºç»“åˆäº†`Math.sin()`å’Œ`Math.random()`ï¼Œéšæœºæ³¢å°±æ˜¯æˆ‘æè¿°ä»–çš„æ–¹å¼ï¼›


```javascript
import SimplexNoise from 'simplex-noise';

const simplex = new SimplexNoise();
const y = simplex.noise2D(x * frequency, 0) * amplitude;
```

åŸºç¡€åŠ›å­¦å’Œæ³¢æµªçš„å·¥ä½œåŸç†ç›¸ä¼¼ï¼Œä½ å¯ä»¥é€šè¿‡è°ƒæ•´é¢‘ç‡å’ŒæŒ¯å¹…æ¥æ§åˆ¶æ³¢æµªçš„é€Ÿåº¦å’Œå¹…åº¦ï¼›


![3.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64d5e407a3354523ad44ab44b875c718~tplv-k3u1fbpfcp-watermark.image?)

emmï¼ŒäºŒç»´å™ªéŸ³ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

# å™ªéŸ³ç»´åº¦
å™ªéŸ³ç®—æ³•å¯ä»¥å®ç°å¤šç»´åº¦ã€‚è¿™é‡Œæ˜¯å°†ç»´åº¦è§†ä¸ºå™ªéŸ³ç”Ÿæˆå™¨çš„è¾“å…¥æ•°é‡ï¼Œ2ä¸ªè¾“å…¥ä¸º2Dï¼Œä¸‰ä¸ªæ˜¯3Dï¼Œä»¥æ­¤ç±»æ¨ï¼›

é€‰æ‹©å“ªç§ç»´åº¦ï¼Œå–å†³äºä½¿ç”¨çš„ç”Ÿæˆå™¨çš„å˜é‡ï¼Œè®©æˆ‘ä»¬çœ‹å‡ ä¸ªä¾‹å­ï¼š



>ğŸ’¡ ä»è¿™é‡Œå¼€å§‹ï¼Œæ¯ä¸ªä¾‹å­éƒ½ä¼šæœ‰ä¸ªé€šè¿‡æŒ‡å‘å®é™…æºç åµŒå…¥çš„æºç å¡ç‰‡ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥è°ƒæ•´å˜é‡ï¼›ï¼ˆ**ç¿»è¯‘æˆ‘æ˜¯ä½¿ç”¨çš„gif**ï¼‰



# ä¸€ç»´å™ªéŸ³ â€”â€” æ³¢åŠ¨
ä»æŠ€æœ¯ä¸Šè®²ï¼Œæ˜¯æ²¡æœ‰ä¸€ç»´å™ªéŸ³çš„ã€‚ä½ å¯ä»¥é€šè¿‡å°†0ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ç»™åˆ°simplex noise2Då¾—åˆ°1ç»´å™ªéŸ³ï¼›æ¶è®¾ä½ æƒ³è®©è¿™ä¸ªç§»åŠ¨çš„çƒçœ‹èµ·æ¥æ¯”è¾ƒè‡ªç„¶ï¼Œå¯ä»¥å¢åŠ xåæ ‡å¹¶ç”Ÿæˆyåæ ‡ï¼›
```javascript
x += 0.1;
y = simplex.noise2D(x * frequency, 0) * amplitude;
```
 
![4.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8859eaadd15d411dbc8995bef6bc7719~tplv-k3u1fbpfcp-watermark.image?)  

# äºŒç»´å™ªéŸ³ â€”â€” åœ°å½¢ç”Ÿæˆå™¨
æˆ‘ä»¬å¯ä»¥é€šè¿‡ç§»åŠ¨zè½´æ–¹å‘çš„é¡¶ç‚¹ï¼Œå°†ä¸€ä¸ªæ°´å¹³2Då¹³é¢è½¬æ¢æˆä¸˜é™µåœ°å½¢ï¼Œä½¿ç”¨xï¼Œyè½´åæ ‡æ¥ç”Ÿæˆzåæ ‡ä½ç½®ï¼›

å°±è¿™æ ·ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªåœ°å½¢ç”Ÿæˆå™¨ğŸ”ï¸ï¼›
```javascript
z = simplex.noise2D(x * frequency, y * frequency) * amplitude;
```

 
![5.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d73ae19d6ce45979cd2286bd37df285~tplv-k3u1fbpfcp-watermark.image?)  

# ä¸‰ç»´å™ªéŸ³â€”â€”é¡¶ç‚¹ä½ç§»
ä½ å¯èƒ½å·²ç»è§è¿‡è¿™ç§è‡ªç„¶æ‰­æ›²çš„çƒä½“ï¼Œå®ƒä»¬é€šè¿‡ç§»åŠ¨çƒä½“é¡¶ç‚¹ç”Ÿæˆï¼›ä½¿ç”¨é¡¶ç‚¹åæ ‡`ï¼ˆxï¼Œyï¼Œzï¼‰`æ¥ç”Ÿæˆæ‰­æ›²çš„ä½ç½®å˜é‡ï¼Œç„¶åé€šè¿‡ç§»åŠ¨é¡¶ç‚¹ç”Ÿæˆæ”¾å°„çš„å½¢çŠ¶ï¼›
```javascript
const distortion =
simplex.noise3D(x * frequency, y * frequency, z * frequency) * amplitude;

newPosition = position.normalize().multiplyScalar(distortion);
```


![6.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1e808e90e3c542d2b7a0692daec83c2d~tplv-k3u1fbpfcp-watermark.image?)

# å››ç»´å™ªéŸ³â€”â€” åŠ¨æ€æ‰­æ›²æ•ˆæœ

æˆ‘ä»¬å¯ä»¥é€šè¿‡4ç»´å™ªéŸ³æ¥ç”Ÿæˆä¸€ä¸ªä¸åœåŠ¨æ€æ‰­æ›²çš„çƒï¼Œè¾“å…¥åˆ†åˆ«æ˜¯é¡¶ç‚¹åæ ‡`ï¼ˆxï¼Œyï¼Œzï¼‰`å’Œ`æ—¶é—´`ã€‚è¿™é¡¹æŠ€æœ¯å¸¸ç”¨äºåˆ›é€ ç±»ä¼¼ç«çƒçš„æ•ˆæœï¼›

```javascript
const distortion =
simplex.noise4D(
x * frequency,
y * frequency,
z * frequency,
time * frequency
) * amplitude;

newPosition = position.normalize().multiplyScalar(distortion);
```

 
![7.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/99d17ff2ca714953b15cb278e9023a24~tplv-k3u1fbpfcp-watermark.image?)  

åœ¨ä¸Šé¢çš„å¤§å¤šæ•°ä¾‹å­é‡Œæˆ‘ä»¬éƒ½ä½¿ç”¨äº†æŒ¯å¹…ï¼Œè¿™æ˜¯ç¨‹åºä¸­ç¼©æ”¾å™ªéŸ³è¾“å‡ºçš„æ–¹å¼ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨æ’å€¼å°†å™ªéŸ³è¾“å‡ºæ˜ å°„åˆ°é€‰æ‹©çš„æŒ‡å®šèŒƒå›´ï¼›

![img.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5942aad65bad41a8b4f079109ba366c6~tplv-k3u1fbpfcp-watermark.image?)

ç°åœ¨æˆ‘ä»¬å·²ç»æŒæ¡äº†åŸºç¡€çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€äº›å™ªéŸ³çš„å…¶ä»–åº”ç”¨ï¼›



# çº¹ç†
ä½¿ç”¨`ï¼ˆxï¼Œyï¼‰`åæ ‡ï¼Œç”ŸæˆäºŒç»´çš„è¡¨æ ¼æ ¼å¼çš„å™ªéŸ³ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ï¼š


![img_1.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/edf582b085f04a8788982ad7cc006a95~tplv-k3u1fbpfcp-watermark.image?)

ä½¿ç”¨æ–¹å¼ï¼š

```javascript
for (let y = 0; y < gridSize[1]; y++) {
for (let x = 0; x < gridSize[0]; x++) {
const n = simplex.noise2D(
x / (gridSize[0] * 0.75),
y / (gridSize[1] * 0.75)
);
}
}
```
è¿™æ˜¯æˆ‘ä»¬çš„å‡ºå‘ç‚¹ã€‚
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Marching Squaresç®—æ³•å°†2Dæ•°æ®è½¬æ¢æˆç­‰é«˜çº¿ã€‚ä½¿ç”¨Canvasï¼ŒSVGï¼ŒWebGLæˆ–è€…å…¶ä»–ä½ å–œæ¬¢çš„å·¥å…·ï¼Œæˆ‘æœ€è¿‘ä½¿ç”¨SVGæ¥ç”Ÿæˆå¸¦æœ‰è½®å»“çš„å¡ç‰‡ï¼Œè¿™æ–¹é¢ç›¸å…³çš„å®Œæ•´æ•™ç¨‹ï¼Œè¯·æŸ¥çœ‹https://storybook.js.org/blog/generative-image-service/ğŸ“¸ï¼›


![img_2.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a31d87968fc1452884116e2ae9ce4e12~tplv-k3u1fbpfcp-watermark.image?)

å…³äºå™ªéŸ³ï¼Œæœ€é…·çš„äº‹æƒ…æ˜¯ä½ å¯ä»¥æ·»åŠ æ—¶é—´ç»´åº¦ï¼Œæ¥ç»™ä½ çš„å›¾ç‰‡æ·»åŠ åŠ¨ç”»ï¼›

```javascript
simplex.noise3D(x / (gridSize[0] * 0.75), y / (gridSize[1] * 0.75), time);
```
![8.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56869babab2b40f8b7fd696d85e6c717~tplv-k3u1fbpfcp-watermark.image?)

# åœº
è€å®è®²ï¼Œå™ªéŸ³çš„äºŒç»´æ•°æ®æ˜¯éå¸¸å®ç”¨çš„ï¼Œè¿™å¯ä»¥åšå¾ˆå¤šçš„äº‹æƒ…ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯æˆ‘ç‰¹åˆ«å–œæ¬¢â€”â€”å™ªéŸ³é¢†åŸŸï¼›

è®©æˆ‘ä»¬å›åˆ°æœ€åˆçš„ç°åº¦è¾“å‡ºï¼Œè¿™é‡Œå¯ä»¥æ˜ å°„å‡ºä¸€ä¸ªæ›´æœ‰è¶£çš„è‰²é˜¶ï¼Œä½ å¯ä»¥è·å–åˆ°ç­‰ç¦»å­ï¼›

![9.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/afe83871233e436ba4dbd8a9cef24fa6~tplv-k3u1fbpfcp-watermark.image?)

æˆ–è€…ä»çŸ©å½¢ç½‘æ ¼å¼€å§‹ï¼Œé€šè¿‡ä½¿ç”¨å™ªéŸ³æ¥æ§åˆ¶é¢œè‰²å’Œè§’åº¦ï¼Œå°†å…¶å˜æˆå‘é‡åœºï¼›

![10.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/21e84885f83c4671a3856c3417107517~tplv-k3u1fbpfcp-watermark.image?)


# å™ªéŸ³ç²’å­
å‘é‡åœºå¾ˆé…·ï¼Œä½†æ˜¯æµåœºæ›´è®©äººå…´å¥‹ã€‚è¿™æ˜¯æˆ‘å»å¹´ç”»çš„å›¾ï¼›


![11.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ec31486a00040759f9dfc6283936435~tplv-k3u1fbpfcp-watermark.image?)

æ³¨æ„ç¬”çš„è½¨è¿¹ã€‚æ¯ä¸€åˆ’éƒ½æ˜¯é€šè¿‡å°†ç²’å­æ”¾åˆ°å‘é‡åœºä¸Šæ¥ç”Ÿæˆçš„ã€‚ç„¶åè¿½è¸ªå®ƒçš„è·¯å¾„ã€‚ğŸ’«

å¥½å§ï¼Œè®©æˆ‘ä»¬åˆ†è§£è¿™ä¸ªè¿‡ç¨‹ã€‚

## åˆ›å»ºæµåœº
ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºä¸€ä¸ªå‘é‡åœºã€‚å’Œä¹‹å‰ä¸€æ ·ã€‚ä½†è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬ä¸ä¼šä¸ºå‘é‡åœºè®¾ç½®åŠ¨ç”»ã€‚

ç¬¬ 2 æ­¥ï¼Œå°†ä¸€å †ç²’å­æ”¾åˆ°ç”»å¸ƒä¸Šã€‚å®ƒä»¬çš„è¿åŠ¨æ–¹å‘åŸºäºåº•å±‚å‘é‡åœºã€‚å‘å‰è¿ˆå‡ºä¸€æ­¥ï¼Œæ‰¾åˆ°æ–°çš„æ–¹å‘å¹¶é‡å¤ã€‚

 
![12.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/056cfea019b548dd9caf68c83d4fec76~tplv-k3u1fbpfcp-watermark.image?)


```javascript
function moveParticle(particle) {
// Calculate direction from noise
const angle =
simplex.noise2D(particle.x * FREQUENCY, particle.y * FREQUENCY) * AMPLITUDE;

// Update the velocity of the particle
// based on the direction
particle.vx += Math.cos(angle) * STEP;
particle.vy += Math.sin(angle) * STEP;

// Move the particle
particle.x += particle.vx;
particle.y += particle.vy;

// Use damping to slow down the particle (think friction)
particle.vx *= DAMPING;
particle.vy *= DAMPING;

particle.line.push([particle.x, particle.y]);
}
```
ç¬¬ä¸‰æ­¥ï¼šè¿½è¸ªç²’å­çš„ä½ç½®ï¼Œä»¥è¿½è¸ªå…¶è·¯å¾„ï¼›


![13.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a2afcbc342d4a0abd42264146c7058a~tplv-k3u1fbpfcp-watermark.image?)

æ·»åŠ æ›´å¤šçš„ç²’å­å’Œé¢œè‰²ï¼Œæˆ‘ä»¬å°±å¯ä»¥è·å¾—æµåœºï¼›

  
![14.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b4c339650924f69a14ccd2b38e0ce0b~tplv-k3u1fbpfcp-watermark.image?)

# ç²’å­ç³»ç»Ÿ
è¯´åˆ°ç²’å­ï¼Œå™ªå£°ä¹Ÿå‡ºç°åœ¨ç²’å­ç³»ç»Ÿä¸­ã€‚å¯¹äºåƒé›¨ã€é›ªæˆ–äº”å½©çº¸å±‘ç­‰æ•ˆæœï¼Œä½ å¸Œæœ›æ¨¡æ‹Ÿä¸€ä¸ªçœ‹èµ·æ¥å¾ˆè‡ªç„¶çš„è¿åŠ¨ã€‚æƒ³è±¡ä¸€ä¸ªäº”å½©çº¸å±‘é¢—ç²’é£˜å‘åœ°é¢ã€‚ç²’å­ä¸ä¼šç›´çº¿ç§»åŠ¨ã€‚ç”±äºç©ºæ°”é˜»åŠ›ï¼Œå®ƒä»¬ä¼šæ¼‚æµ®å’Œæ‘†åŠ¨ã€‚å™ªå£°æ˜¯æ·»åŠ ä»¿è‡ªç„¶å½¢æ€éå¸¸å¥½çš„å·¥å…·ã€‚

```javascript
const wiggle = {
x: simplex.noise2D(particle.x * frequency, time) * amplitude,
y: simplex.noise2D(particle.y * frequency, time) * amplitude,
};
particle.x += wiggle.x;
particle.y += wiggle.y;
```
æƒ³æ·±å…¥äº†è§£ï¼Œè¯¦æƒ…è¯·çœ‹ï¼šhttps://varun.ca/confetti/


![15.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d18b835a4c3d4dd48af6f971f56be623~tplv-k3u1fbpfcp-watermark.image?)

# ç€è‰²å™¨
è®©æˆ‘ä»¬å›åˆ°é‚£äº›åŠ¨ç”»æ–‘ç‚¹ã€‚ä½¿ç”¨ç€è‰²å™¨æ“ä½œå’Œè®¾ç½®3DåŠ¨ç”»å‡ ä½•å›¾å½¢çš„æ•ˆç‡è¦é«˜å¾—å¤šã€‚ä½†æ˜¯ç€è‰²å™¨æœ¬èº«æ˜¯ä¸€ä¸ªå®Œå…¨ä¸åŒçš„ä¸–ç•Œã€‚å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„ WebGL ç‰ˆæœ¬çš„å™ªéŸ³ï¼Œgsl-noiseã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ glslify å°†å®ƒå¯¼å…¥åˆ°æˆ‘ä»¬çš„ç€è‰²å™¨ä¸­ã€‚

æˆ‘ä»¬ä¼šæ…¢æ…¢æ¥ï¼Œå…ˆä» 2D å¼€å§‹ã€‚


![16.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6d365e65cb4f4a61b61a4eec4b30768f~tplv-k3u1fbpfcp-watermark.image?)

ä¸Šé¢çš„åŠ¨ç”»ä¸æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„è½®å»“éå¸¸ç›¸ä¼¼ã€‚å®ƒæ˜¯é€šè¿‡ç‰‡æ®µç€è‰²å™¨å®ç°çš„ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸ºcanvasçš„æ¯ä¸ªåƒç´ è¿è¡Œç›¸åŒçš„ç¨‹åºã€‚

æ³¨æ„åˆ°`pragma` è¡Œäº†å—ï¼Ÿé‚£æ˜¯æˆ‘ä»¬å¯¼å…¥ webgl-noiseã€‚ç„¶åç”¨å®ƒä¸ºæ¯ä¸ªåƒç´ ä½ç½® `vUv` ç”Ÿæˆå™ªå£°æ•°æ®ã€‚

è¿™éƒ¨åˆ†ç°åœ¨çœ‹èµ·æ¥åº”è¯¥å¾ˆç†Ÿæ‚‰äº†ã€‚

fragment.glsl

```javascript
precision highp float;
uniform float time;
uniform float density;
varying vec2 vUv;

#define PI 3.141592653589793
#pragma glslify: noise = require(glsl-noise/simplex/3d);

float patternZebra(float v){
float d = 1.0 / density;
float s = -cos(v / d * PI * 2.);
return smoothstep(.0, .1 * d, .1 * s / fwidth(s));
}

void main() {
// Generate noise data float amplitude = 1.0; float frequency = 1.5; float noiseValue = noise(vec3(vUv * frequency, time)) * amplitude;  // Convert noise data to rings
float t = patternZebra(noiseValue);
vec3 color = mix(vec3(1.,0.4,0.369), vec3(0.824,0.318,0.369), t);
// Clip the rings to a circle
float dist = length(vUv - vec2(0.5, 0.5));
float alpha = smoothstep(0.250, 0.2482, dist);

gl_FragColor = vec4(color, alpha);
}
```

ç‰‡æ®µç€è‰²å™¨å…·æœ‰ç”¨äºç»˜åˆ¶å½¢çŠ¶çš„è·ç¦»å‡½æ•°çš„æ¦‚å¿µã€‚ patternZebra å°±æ˜¯ä¸€ä¸ªå°†å™ªå£°æ•°æ®è½¬æ¢ä¸ºç¯çš„ç¤ºä¾‹ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒè¿”å› 0 æˆ– 1ã€‚ç„¶åæˆ‘ä»¬ç”¨å®ƒæ¥é€‰æ‹©æ··åˆçš„é¢œè‰²ã€‚æœ€åï¼Œä½¿ç”¨å¦ä¸€ä¸ªè·ç¦»å‡½æ•°æ¥å‰ªè£åœ†å½¢è¾¹ç•Œã€‚

çœ‹èµ·æ¥å¾ˆåŸºç¡€ï¼Ÿ

å¥½å§ï¼Œç€è‰²å™¨çš„æƒŠäººä¹‹å¤„åœ¨äºï¼Œä½ å¯ä»¥å°†å®ƒä»¬å˜æˆä¸€ç§æè´¨å¹¶å°†å…¶åº”ç”¨äºæ›´å¤æ‚çš„å‡ ä½•ä½“ã€‚

# å™ªå£°æè´¨
æˆ‘ä»¬å¯ä»¥ä»ä¸Šé¢è·å–ç›¸åŒçš„ 2D mars ç€è‰²å™¨ã€‚å°†å…¶è½¬æ¢ä¸º ThreeJS ç€è‰²å™¨æè´¨ã€‚ç„¶åä½¿ç”¨é¡¶ç‚¹ä½ç½® vPosition ä»£æ›¿ vUv ç”Ÿæˆå™ªå£°ã€‚ ç§ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª 3D marsï¼

```javascript
const material = new THREE.ShaderMaterial({
extensions: {
derivatives: true,
},
uniforms: {
time: { value: 0 },
density: { value: 1.0 },
},
vertexShader: /*glsl*/ ` varying vec3 vPosition; void main () { vPosition = position; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); } `,
fragmentShader: glslify(/* glsl */ ` precision highp float; varying vec3 vPosition; uniform float time; uniform float density; #pragma glslify: noise = require(glsl-noise/simplex/4d); #define PI 3.141592653589793 float patternZebra(float v){ float d = 1.0 / density; float s = -cos(v / d * PI * 2.); return smoothstep(.0, .1 * d, .1 * s / fwidth(s)); } void main () { float frequency = .6; float amplitude = 1.5; float v = noise(vec4(vPosition * frequency, sin(PI * time))) * amplitude; float t = patternZebra(v); vec3 fragColor = mix(vec3(1.,0.4,0.369), vec3(0.824,0.318,0.369), t); gl_FragColor = vec4(fragColor, 1.); } `),
});
```


![17.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/35281e84fe85477292ad62c73187d207~tplv-k3u1fbpfcp-watermark.image?)  

è€å®è¯´ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚ç€è‰²å™¨å¼€è¾Ÿäº†è®¸å¤šå¯èƒ½æ€§ã€‚å°±åƒä¸‹é¢çš„ä¾‹å­

ä¸ä»…æ˜¯å™ªå£°æ˜ å°„åˆ°é¢œè‰²ï¼Œè¿˜å¯ä»¥æ˜¯é€æ˜åº¦ã€‚


![18.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/891b024e400f47409da1ce0b7744afbb~tplv-k3u1fbpfcp-watermark.image?)  

# å…‰æ³½æ–‘ç‚¹
ä¸é¡¶ç‚¹ç½®æ¢èƒŒåçš„æƒ³æ³•éå¸¸ç›¸ä¼¼ã€‚æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªé¡¶ç‚¹ç€è‰²å™¨æ¥è½¬æ¢çƒä½“çš„æ¯ä¸ªé¡¶ç‚¹ï¼Œè€Œä¸æ˜¯ç‰‡æ®µç€è‰²å™¨ã€‚åŒæ ·ï¼Œä½¿ç”¨ç€è‰²å™¨æè´¨åº”ç”¨ã€‚

vertex.glsl
```javascript
precision highp float;
varying vec3 vNormal;

#pragma glslify: snoise4 = require(glsl-noise/simplex/4d)

uniform float u_time;
uniform float u_amplitude;
uniform float u_frequency;

void main () {
vNormal = normalMatrix * normalize(normal); float distortion = snoise4(vec4(normal * u_frequency, u_time)) * u_amplitude; vec3 newPosition = position + (normal * distortion);
gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);
}
```
åŠ ä¸Šä¸€äº› [matcap](https://threejs.org/docs/#api/en/materials/MeshMatcapMaterial)ï¼Œä½ å°±ä¼šå¾—åˆ°ä¸€äº›æœ‰å…‰æ³½çš„åŠ¨ç”»æ–‘ç‚¹ã€‚

![19.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8b71c2607dce4f929ab924f6225d434d~tplv-k3u1fbpfcp-watermark.image?)

# è½®åˆ°ä½ åˆ›é€ å™ªéŸ³äº†
é‚£çœŸæ˜¯ä¸€æ®µæ—…ç¨‹ã€‚è¿åŠ¨ã€çº¹ç†ã€åœºã€ç²’å­ç³»ç»Ÿå’Œç½®æ¢â€”â€”å™ªå£°éƒ½èƒ½åšã€‚å®ƒç¡®å®æ˜¯åˆ›æ„ç¼–ç ä¸–ç•Œçš„ä¸»åŠ›å†›ã€‚

å¾ˆæ˜æ˜¾ï¼Œä½ æƒ³ç©å™ªéŸ³ğŸ˜

æˆ‘å·²ç»ä¸ºä½ å‡†å¤‡äº†ä¸€ä¸ªå°å°çš„å…¥é—¨ CodePenã€‚å®ƒæ—‹è½¬äº†ä¸€ä¸ªå™ªå£°ç½‘æ ¼å¹¶å°†å…¶æ˜ å°„åˆ°ä¸€ä¸ªå­—å½¢æ•°ç»„ã€‚åªéœ€ä»ä¿®æ”¹æ•°ç»„å¼€å§‹ï¼Œçœ‹çœ‹ä½ èƒ½èµ°å¤šè¿œã€‚

```javascript
const glyphs = ['Â¤', 'âœ³', 'â—', 'â—”', 'â—‹', 'â—•', 'â—', 'â—‘', 'â—’'];
```
æˆ–è€…ï¼Œå¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾æ›´é«˜çº§çš„ä¸œè¥¿ï¼Œè¯·æŸ¥çœ‹[noisedeck.app](https://noisedeck.app/)ã€‚å®ƒå°±åƒä¸€ä¸ªåªç”¨äºè§†è§‰æ•ˆæœçš„åˆæˆå™¨ã€‚

